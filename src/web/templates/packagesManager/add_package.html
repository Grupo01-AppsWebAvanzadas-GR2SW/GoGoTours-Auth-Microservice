{% extends "base.html" %}

{% block title %}
    Add Package
{% endblock %}

{% block header %}
    Package Manager GoGoTours
    {% block head_tags %}
        <link rel="stylesheet" href="{{ url_for('static',filename='styles/base/package.css') }}"/>
        <link rel="stylesheet" href="{{ url_for('static',filename='styles/base/popup.css') }}"/>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">

    {% endblock %}
{% endblock %}

{% block content %}

    <div id="popup" class="popup">
        <div class="popup-content">
            <i class="fas fa-check-circle"></i>
            <p>Paquete agregado correctamente</p>
        </div>
    </div>

    <p class="package-title">AGREGAR TOUR</p>
      <div style="max-width: 600px; margin: 0 auto;" class="container">
        <form id="add-package-form" method="post" style="display: grid; gap: 10px;">
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                <label class="form__label" for="name" style="text-align: right;">Nombre del tour:</label>
                <input class="form__input" type="text" id="name" name="packageName" required/>
            </div>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                <label class="form__label" for="description" style="text-align: right;">Descripción del tour:</label>
                <input class="form__input" type="text" id="description" name="packageDescription" required/>
            </div>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                <label class="form__label" for="destination_place" style="text-align: right;">Lugar de destino:</label>
                <input class="form__input" type="text" id="destination_place" name="packageDestinationPlace" required/>
            </div>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                <label class="form__label" for="duration" style="text-align: right;">Duración del tour (días):</label>
                <input class="form__input" type="number" id="duration" name="packageDuration" required/>
            </div>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                <label class="form__label" for="max_capacity" style="text-align: right;">Capacidad máxima:</label>
                <input class="form__input" type="number" step="1" id="max_capacity" name="packageMaxCapacity" required/>
            </div>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                <label class="form__label" for="cost" style="text-align: right;">Costo del tour ($):</label>
                <input class="form__input" type="number" step="0.01" id="cost" name="packageCost" required/>
            </div>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                <label class="form__label" for="start_date" style="text-align: right;">Fecha de inicio:</label>
                <input class="form__input" type="date" id="start_date" name="packageStateDate" required/>
            </div>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                <label class="form__label" for="end_date" style="text-align: right;">Fecha final:</label>
                <input class="form__input" type="date" id="end_date" name="packageEndDate" required/>
            </div>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                <label class="form__label" for="url" style="text-align: right;">Imágen (URL):</label>
                <input class="form__input" type="url" id="url" name="packageUrl" required/>
            </div>
            <div style="text-align: center;">
                <button id="btn-agregar" class="button button--primary" type="submit" style="padding: 10px 80px; margin: 0px auto; ">Agregar tour</button>
            </div>
        </form>
      </div>

   <script>
        document.addEventListener('DOMContentLoaded', function () {
            var popup = document.getElementById('popup');
            var btnAgregar = document.getElementById('btn-agregar');
            function validarFormulario() {
                var campos = document.getElementById('add-package-form').elements;

                for (var i = 0; i < campos.length; i++) {
                    if (campos[i].type !== 'submit' && campos[i].type !== 'hidden') {
                        if (campos[i].value.trim() === '') {
                            return false;
                        }
                    }
                }
                return true;
            }

            btnAgregar.addEventListener('click', function (event) {
                var formularioValido = validarFormulario();
                if (formularioValido) {
                    popup.style.display = 'block';
                    setTimeout(function () {
                        popup.style.display = 'none';
                    }, 8000);
                } else {
                    event.preventDefault();
                    alert('Por favor, complete todos los campos correctamente.');
                }
            });
        });
    </script>


{% endblock %}

{% block page %}
    add packages
{% endblock %}
